<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UG to Remise Converter Lite - by LammariOmDev®</title>
    
    <link rel="icon" type="image/jpeg" href="logo.jpg">

    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --header-bg: linear-gradient(180deg, #dceefc 0%, #a4d3f7 100%);
            --blue-bar: linear-gradient(180deg, #2fa3f7 0%, #0d6ac4 100%);
            --bg-color: #f0f0f0;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 10px;
        }

        .app-container {
            background: white;
            width: 70%; 
            min-width: 600px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 1px solid #ccc;
            border-radius: 8px;
        }

        /* Header */
        .header {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #ccc;
            background: linear-gradient(to bottom, #ffffff 0%, #f2f2f2 100%);
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }

        .title-group h1 { color: #005a9e; font-size: 22px; margin: 0; font-weight: 700; }
        .title-group p { color: #005a9e; font-size: 12px; margin: 0; text-align: left; font-style: italic; }

        .header-logo {
            height: 45px;
            width: auto;
            border-radius: 5px;
        }

        /* Blue Bar */
        .blue-bar {
            background: var(--blue-bar);
            color: white;
            padding: 5px 15px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reset-btn {
            background: #004080;
            border: 1px solid #fff;
            color: white;
            padding: 4px 10px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 12px;
        }

        /* --- LAYOUT GRID --- */
        .content {
            padding: 20px;
            background-color: #eee;
            display: grid;
            gap: 20px;
            grid-template-areas: "inputs results";
            grid-template-columns: 2fr 1fr;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
        }

        .inputs-section {
            grid-area: inputs;
            display: grid;
            gap: 15px;
            grid-template-columns: 1fr 1fr; 
            grid-template-areas:
                "area-ug   area-frs"
                "area-rem  area-labo";
            align-items: center;
        }

        /* Assignation des zones */
        #group-ug { grid-area: area-ug; }
        #group-frs { grid-area: area-frs; }
        #group-remise { grid-area: area-rem; }
        #group-labo { grid-area: area-labo; }

        .mobile-divider { display: none; }

        .results-section {
            grid-area: results;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Styles des Inputs */
        .input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        label {
            font-weight: 700;
            color: #003366;
            min-width: 60px;
            white-space: nowrap;
        }

        .input-wrapper { position: relative; width: 100%; }

        input[type="number"] {
            padding: 8px;
            font-size: 18px;
            color: #005a9e;
            border: 1px solid #ccc;
            text-align: center;
            width: 80%;
            font-weight: bold;
            box-sizing: border-box;
            selection-background-color: #005a9e;
            selection-color: white;
            border-radius: 6px;
        }
        
        input[type="number"]:focus {
            outline: 2px solid #2fa3f7;
            border-color: #005a9e;
            background-color: #f0f8ff;
        }

        .suffix {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #005a9e;
            font-weight: bold;
        }

        /* Result Boxes */
        .result-box {
            background: white;
            border: 1px solid #ccc;
            /* MODIFICATION ICI : Padding encore réduit à 5px */
            padding: 5px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border-radius: 6px;
        }

        .result-label {
            font-size: 12px;
            color: #003366;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .result-value {
            /* MODIFICATION ICI : Taille encore réduite à 28px */
            font-size: 28px;
            font-weight: bold;
            color: #4c8a00;
            text-align: center;
            line-height: 1.2;
        }

        /* --- MOBILE SPECIAL --- */
        @media (max-width: 700px) {
            .app-container {
                width: 95%; 
                min-width: 0;
            }

            .content {
                display: flex;
                flex-direction: column;
            }

            .inputs-section {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

            /* ORDRE MOBILE SPÉCIFIQUE */
            #group-ug     { order: 1; }
            #group-remise { order: 2; }
            #div-sep-1    { order: 3; display: block; }
            #group-frs    { order: 4; }
            #group-labo   { order: 5; }
            
            .mobile-divider {
                display: block;
                border: 0;
                border-top: 1px solid #ccc;
                margin: 5px 0;
                width: 100%;
            }

            .results-section {
                margin-top: 10px;
                border-top: 1px solid #ccc;
                padding-top: 20px;
            }

            .result-box {
                width: 100%;
                /* Ajustement de la hauteur min sur mobile aussi */
                min-height: 60px;
            }
        }
    </style>
</head>
<body>

    <div class="app-container">
        <div class="header">
            <div class="title-group" style="width:100%">
                <h1>Advanced UG to Remise Converter - LITE</h1>
                <p>©2025 by LammariOmDev® - v1.0.22 (Web)</p>
            </div>
            <img src="logo.jpg" alt="Logo Calculatrice" class="header-logo">
        </div>

        <div class="blue-bar">
            <span>Conversions</span>
            <button class="reset-btn" onclick="resetFields()">Vider champs ↺</button>
        </div>

        <div class="content">
            
            <div class="inputs-section">
                <div class="input-group" id="group-ug">
                    <label>UG</label>
                    <div class="input-wrapper">
                        <input type="number" inputmode="decimal" step="1" id="ug" value="0.00" oninput="calculateFromUG()" enterkeyhint="next">
                        <span class="suffix">%</span>
                    </div>
                </div>

                <hr class="mobile-divider" id="div-sep-1">

                <div class="input-group" id="group-frs">
                    <label>R. Fourn</label>
                    <div class="input-wrapper">
                        <input type="number" inputmode="decimal" step="0.01" id="remise_frs" value="0.00" oninput="calculateTotals()" enterkeyhint="next">
                        <span class="suffix">%</span>
                    </div>
                </div>

                <div class="input-group" id="group-remise">
                    <label>Remise</label>
                    <div class="input-wrapper">
                        <input type="number" inputmode="decimal" step="0.01" id="remise" value="0.00" oninput="calculateFromRemise()" enterkeyhint="next">
                        <span class="suffix">%</span>
                    </div>
                </div>

                <div class="input-group" id="group-labo">
                    <label>R. Labo</label>
                    <div class="input-wrapper">
                        <input type="number" inputmode="decimal" step="0.01" id="remise_labo" value="0.00" oninput="calculateTotals()" enterkeyhint="done">
                        <span class="suffix">%</span>
                    </div>
                </div>
            </div>

            <div class="results-section">
                <div class="result-box">
                    <div class="result-label">UG Totale</div>
                    <div class="result-value" id="total_ug">30.00 %</div>
                </div>
                <div class="result-box">
                    <div class="result-label">Remise Totale</div>
                    <div class="result-value" id="total_remise">23.08 %</div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const ugInput = document.getElementById('ug');
        const remiseInput = document.getElementById('remise');
        const frsInput = document.getElementById('remise_frs');
        const laboInput = document.getElementById('remise_labo');
        const totalUgDisplay = document.getElementById('total_ug');
        const totalRemiseDisplay = document.getElementById('total_remise');

        // --- CALCULS ---

        function calculateFromUG() {
            let ug = parseFloat(ugInput.value);
            if (isNaN(ug)) { remiseInput.value = ""; calculateTotals(); return; }
            let remise = (ug / (100 + ug)) * 100;
            remiseInput.value = remise.toFixed(2);
            calculateTotals();
        }

        function calculateFromRemise() {
            let remise = parseFloat(remiseInput.value);
            if (isNaN(remise)) { ugInput.value = ""; calculateTotals(); return; }
            let r_decimal = remise / 100;
            if (r_decimal >= 1) { ugInput.value = "Err"; return; }
            let ug = (r_decimal / (1 - r_decimal)) * 100;
            ugInput.value = ug.toFixed(2);
            calculateTotals();
        }

        function calculateTotals() {
            let remiseBase = (parseFloat(remiseInput.value) || 0) / 100;
            let remiseFrs = (parseFloat(frsInput.value) || 0) / 100;
            let remiseLabo = (parseFloat(laboInput.value) || 0) / 100;

            let totalRemiseDec = 1 - ( (1 - remiseBase) * (1 - remiseFrs) * (1 - remiseLabo) );
            let totalRemisePercent = totalRemiseDec * 100;

            let totalUgPercent = 0;
            if (totalRemiseDec < 1) {
                totalUgPercent = (totalRemiseDec / (1 - totalRemiseDec)) * 100;
            }

            totalRemiseDisplay.innerText = parseFloat(totalRemisePercent.toFixed(2)) + " %";
            totalUgDisplay.innerText = parseFloat(totalUgPercent.toFixed(2)) + " %";
        }

        function resetFields() {
            ugInput.value = ""; remiseInput.value = ""; frsInput.value = ""; laboInput.value = "";
            calculateTotals();
            ugInput.focus();
        }

        // --- NAVIGATION ---
        const navigationOrder = [ugInput, remiseInput, frsInput, laboInput];
        navigationOrder.forEach((input, index) => {
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    let nextIndex = (index + 1) % navigationOrder.length;
                    navigationOrder[nextIndex].focus();
                }
            });
            input.addEventListener('focus', function() {
                this.select();
            });
        });

        calculateTotals();
        window.onload = function() {
            ugInput.focus();
        };

    </script>
</body>
</html>
